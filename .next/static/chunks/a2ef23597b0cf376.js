(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,n,t)=>{n.exports=e.r(76562)},23190,e=>{"use strict";var n=e.i(43476),t=e.i(71645),l=e.i(24049),a=e.i(50699),s=e.i(82310),r=e.i(32322);let o=(0,a.createLayerComponent)(function({position:e,...n},t){let a=new r.Marker(e,n);return(0,l.createElementObject)(a,(0,s.extendContext)(t,{overlayContainer:a}))},function(e,n,t){n.position!==t.position&&e.setLatLng(n.position),null!=n.icon&&n.icon!==t.icon&&e.setIcon(n.icon),null!=n.zIndexOffset&&n.zIndexOffset!==t.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),null!=n.opacity&&n.opacity!==t.opacity&&e.setOpacity(n.opacity),null!=e.dragging&&n.draggable!==t.draggable&&(!0===n.draggable?e.dragging.enable():e.dragging.disable())}),i=(0,a.createOverlayComponent)(function(e,n){let t=new r.Tooltip(e,n.overlayContainer);return(0,l.createElementObject)(t,n)},function(e,n,{position:l},a){(0,t.useEffect)(function(){let t=n.overlayContainer;if(null==t)return;let{instance:s}=e,r=e=>{e.tooltip===s&&(null!=l&&s.setLatLng(l),s.update(),a(!0))},o=e=>{e.tooltip===s&&a(!1)};return t.on({tooltipopen:r,tooltipclose:o}),t.bindTooltip(s),function(){t.off({tooltipopen:r,tooltipclose:o}),null!=t._map&&t.unbindTooltip()}},[e,n,a,l])}),c=new r.default.Icon({iconUrl:"/map/player-marker.png",iconSize:[32,32],iconAnchor:[16,32]});function d({name:e,x:t,y:l}){return(0,n.jsx)(o,{position:[l,t],icon:c,children:(0,n.jsx)(i,{children:e})})}function h({isOpen:e,onClose:l,onSpawn:a,coords:s}){let[r,o]=(0,t.useState)(""),[i,c]=(0,t.useState)(1);return e&&s?(0,n.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,n.jsxs)("div",{className:"bg-white p-6 rounded shadow-lg w-80",children:[(0,n.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Spawn de Pal"}),(0,n.jsxs)("label",{className:"block mb-2",children:["Pal ID:",(0,n.jsx)("input",{className:"border p-1 w-full",value:r,onChange:e=>o(e.target.value),placeholder:"Ex: 101"})]}),(0,n.jsxs)("label",{className:"block mb-2",children:["Quantidade:",(0,n.jsx)("input",{className:"border p-1 w-full",type:"number",min:1,value:i,onChange:e=>c(Number(e.target.value))})]}),(0,n.jsxs)("div",{className:"mb-2 text-sm text-gray-600",children:["Coordenadas: X: ",s.x,", Y: ",s.y,", Z: ",s.z]}),(0,n.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,n.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>a({palId:r,quantity:i,coordinates:s}),children:"Spawn"}),(0,n.jsx)("button",{className:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400",onClick:l,children:"Cancelar"})]})]})}):null}var u=e.i(18566);function p({children:e}){let l=(0,u.useRouter)();return(0,t.useEffect)(()=>{localStorage.getItem("palworld_auth")||l.push("/login")},[l]),(0,n.jsx)(n.Fragment,{children:e})}function x(){let l,[a,s]=(0,t.useState)(""),[r,o]=(0,t.useState)([]),[i,c]=(0,t.useState)({open:!1,coords:null}),[u,x]=(0,t.useState)(!1);(0,t.useEffect)(()=>{x(!0)},[]);let m=async e=>{await fetch("/api/pals/spawn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),c({open:!1,coords:null})};return(0,t.useEffect)(()=>{fetch("/api/server/info").then(e=>e.json()).then(e=>s(e.serverName||"Servidor Palworld"));let e=()=>{fetch("/api/players").then(e=>e.json()).then(e=>o(e.players||[]))};e();let n=setInterval(e,5e3);return()=>clearInterval(n)},[]),(0,n.jsx)(p,{children:(0,n.jsxs)("main",{className:"h-screen w-screen flex flex-col",children:[(0,n.jsx)("header",{className:"bg-gray-900 text-white p-4 text-xl font-bold",children:a}),(0,n.jsx)("div",{className:"flex-1 relative",children:(0,n.jsxs)("div",{className:"container",style:{maxWidth:1200,margin:"40px auto"},children:[(0,n.jsx)("h2",{children:"Dashboard"}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("strong",{children:"Servidor:"})," ",a,(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Jogadores online:"})," ",r.length]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h4",{children:"Jogadores"}),0===r.length?(0,n.jsx)("p",{children:"Nenhum jogador online."}):(0,n.jsxs)("table",{className:"table table-dark table-striped",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Nome"}),(0,n.jsx)("th",{children:"X"}),(0,n.jsx)("th",{children:"Y"}),(0,n.jsx)("th",{children:"Z"})]})}),(0,n.jsx)("tbody",{children:r.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.x}),(0,n.jsx)("td",{children:e.y}),(0,n.jsx)("td",{children:e.z})]},t))})]})]}),u&&(0,n.jsx)(t.Suspense,{fallback:(0,n.jsx)("div",{children:"Carregando mapa..."}),children:(l=t.default.lazy(()=>e.A(32022)),(0,n.jsx)(l,{onMapClick:e=>{c({open:!0,coords:{x:e.lng,y:e.lat,z:0}})},players:r}))}),u&&r.map((e,t)=>(0,n.jsx)(d,{name:e.name,x:e.x,y:e.y},t)),(0,n.jsx)(h,{isOpen:i.open,coords:i.coords,onClose:()=>c({open:!1,coords:null}),onSpawn:m})]})})]})})}e.s(["HomeDashboard",()=>x],23190)},32022,e=>{e.v(n=>Promise.all(["static/chunks/92775ae1698e5da0.css","static/chunks/5ce8c66f0ad0d1d2.js"].map(n=>e.l(n))).then(()=>n(50420)))}]);